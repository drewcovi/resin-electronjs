version: '2'
volumes:
  firmware:
services:

  platform:
    build: ./platform
    privileged: true
    labels:
      io.resin.features.kernel-modules: '1'
      io.resin.features.firmware: '1'
      io.resin.features.dbus: '1'
      io.resin.features.supervisor-api: '1'
      io.resin.features.resin-api: '1'
    depends_on:
      - services

  services:
    build: ./services
    privileged: true

  frontend:
    build: ./frontend
    privileged: true
    labels:
      io.resin.features.kernel-modules: '1'
      io.resin.features.firmware: '1'
      io.resin.features.dbus: '1'
      io.resin.features.supervisor-api: '1'
      io.resin.features.resin-api: '1'
    depends_on:
      - platform
    volumes:
      - 'firmware:/usr/src/app'

